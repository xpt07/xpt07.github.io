<!doctype html>
<html lang="en">
<head>
    <title>Path Tracer — GuiCodes</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Interactive CPU-based Path Tracer with BVH, MIS, and Denoising">
    <link rel="shortcut icon" href="../assets/images/favicon.png">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link rel="stylesheet" href="../assets/icons/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../assets/plugins/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/plugins/css/animate.css">
    <link rel="stylesheet" href="../assets/plugins/css/owl.css">
    <link rel="stylesheet" href="../assets/plugins/css/jquery.fancybox.min.css">
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link rel="stylesheet" href="../assets/css/responsive.css">
    <link rel="stylesheet" href="../assets/css/colors/purple.css" title="purple">
</head>
<body class="dark-vertion black-bg">

    <header class="black-bg mh-header mh-fixed-nav nav-scroll mh-xs-mobile-nav">
        <div class="overlay"></div>
        <div class="container">
            <nav class="navbar navbar-expand-lg mh-nav nav-btn">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar">
                    <span class="navbar-toggler-icon icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbar">
                    <ul class="navbar-nav mr-auto ml-auto">
                        <li class="nav-item"><a class="nav-link" href="../index.html#mh-home">Home</a></li>
                        <li class="nav-item"><a class="nav-link" href="../index.html#mh-portfolio">Portfolio</a></li>
                        <li class="nav-item"><a class="nav-link" href="../index.html#mh-contact">Contact</a></li>
                    </ul>
                    <a class="btn btn-fill" href="../index.html#mh-portfolio"><i class="fa fa-arrow-left"></i> Back to Portfolio</a>
                </div>
            </nav>
        </div>
    </header>

    <section class="project-hero mh-home" id="mh-home" style="background: url('../assets/images/portfolio/afterTD-clipped.png') center/cover no-repeat;">
        <div class="container">
            <div class="row section-separator vertical-middle-content home-padding">
                <div class="col-sm-8">
                    <div class="mh-header-info">
                        <div class="mh-promo wow fadeInUp"><span>Project</span></div>
                        <h2 class="wow fadeInUp">Interactive Path Tracer</h2>
                        <h4 class="wow fadeInUp">Realistic CPU Rendering with BVH, MIS & Denoising</h4>
                        <div class="mh-meta wow fadeInUp">
                            <span class="badge-tech">C++</span>
                            <span class="badge-tech">Path Tracing</span>
                            <span class="badge-tech">DirectX</span>
                            <span class="badge-tech">Multithreading</span>
                            <span class="badge-tech">OIDN</span>
                            <span class="badge-tech">BVH</span>
                            <span class="badge-tech">MIS</span>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4 text-center">
                    <img src="../assets/images/portfolio/cornell-box-PT.png" alt="Ray tracer preview" class="img-fluid rounded">
                </div>
            </div>
        </div>
    </section>

    <main class="mh-about" id="content">
        <div class="container">
            <div class="row section-separator">
                <div class="col-md-8">
                    <div class="mh-about-inner">
                        <h3 class="mh-section-title">Overview</h3>
                        <p>
                            This project extends a basic ray tracer into a physically-based, Monte Carlo path tracer implemented in C++ with DirectX integration. It includes a bounding volume hierarchy (BVH), multiple importance sampling (MIS), support for emissive and environment lighting, a layered BSDF system with a physically-based glass material, and denoising via Intel's Open Image Denoise (OIDN).
                        </p>

                        <h3 class="mh-section-title">Key Features</h3>
                        <ul>
                            <li><strong>BVH Acceleration:</strong> Recursive AABB tree using median split heuristics</li>
                            <li><strong>Tile-based Multithreading:</strong> ~12× speedup over sequential rendering</li>
                            <li><strong>Multiple Importance Sampling:</strong> Combines BSDF & light sampling</li>
                            <li><strong>Glass BSDF:</strong> Fresnel-based specular reflection & refraction</li>
                            <li><strong>Environment Lighting:</strong> Tabulated 2D distribution from HDR maps</li>
                            <li><strong>Light Tracing:</strong> Simulates paths originating from light sources</li>
                            <li><strong>Intel OIDN Denoising:</strong> Utilizes auxiliary normal & albedo buffers</li>
                        </ul>

                        <h3 class="mh-section-title">Multithreaded Tile-Based Rendering</h3>
                        <p>
                            Pixels are rendered independently in tiles, dispatched to threads via an atomic queue. This reduces contention and scales well with modern multi-core CPUs. A sample scene that took <strong>~59.7s</strong> sequentially was reduced to <strong>~5s</strong> using this method.
                        </p>

                        <h3 class="mh-section-title">Adaptive Sampling (Experimental)</h3>
                        <p>
                            A variance-based strategy was used to allocate more samples to noisy tiles. Despite following best practices, the gains were minimal due to unstable variance estimates at low samples and tile management overhead.
                        </p>

                        <h3 class="mh-section-title">Denoising with Intel OIDN</h3>
                        <p>
                            The renderer outputs auxiliary normal and albedo buffers used by OIDN to generate clean images from noisy inputs. This is integrated into the film pipeline and allows saving denoised frames with tone mapping applied.
                        </p>

                        <h3 class="mh-section-title">Environment Lighting & MIS</h3>
                        <p>
                            Environment maps are sampled using a <strong>2D cumulative distribution function (CDF)</strong> built from texel luminance × sin(θ), improving energy conservation. <em>Multiple importance sampling</em> reduces noise by balancing light and BSDF sampling using the balance heuristic:
                        </p>
                        <pre><code>weight = lightPdf / (lightPdf + bsdfPdf)</code></pre>
                        <p>
                            MIS is applied both at light sampling and during light source hits in recursive paths.
                        </p>

                        <h3 class="mh-section-title">Physically-Based Glass BSDF</h3>
                        <p>
                            Implements specular reflection and transmission based on Snell’s Law and the Fresnel equations. Delta distributions are used, so the PDF returns 0. Importance sampling is based on the Fresnel term:
                        </p>
                        <pre><code>if (rand &lt; fresnel) reflect; else refract;</code></pre>
                        <p>
                            This enables realistic dielectrics and transparent surfaces like glass or water.
                        </p>

                        <h3 class="mh-section-title">Light Tracing</h3>
                        <p>
                            Light tracing simulates paths from the light source into the scene. A <strong>sensor importance function</strong> weights connection attempts to the camera based on angle and projected area:
                        </p>
                        <pre><code>we = 1 / (A_film × cos⁴(θ))</code></pre>
                        <p>
                            This improves accuracy of indirect lighting and caustics in challenging scenarios.
                        </p>

                        <h3 class="mh-section-title">Before / After Examples</h3>

                        <!-- Denoising -->
                        <h4>Denoising</h4>
                        <div class="row">
                            <div class="col-md-6">
                                <a href="../assets/images/portfolio/noD.png" data-fancybox="gallery">
                                    <img src="../assets/images/portfolio/noD.png" class="img-fluid rounded mb-3" alt="Original Image">
                                </a>
                                <p class="text-center">Original</p>
                            </div>
                            <div class="col-md-6">
                                <a href="../assets/images/portfolio/yesD.png" data-fancybox="gallery">
                                    <img src="../assets/images/portfolio/yesD.png" class="img-fluid rounded mb-3" alt="Denoised Image">
                                </a>
                                <p class="text-center">Denoised (OIDN)</p>
                            </div>
                        </div>

                        <!-- MIS -->
                        <h4>Environment MIS</h4>
                        <div class="row">
                            <div class="col-md-6">
                                <img src="../assets/images/portfolio/beforeTD.png" class="img-fluid rounded mb-3" alt="Without MIS">
                                <p class="text-center">No MIS or tabulated CDF</p>
                            </div>
                            <div class="col-md-6">
                                <img src="../assets/images/portfolio/afterTD.png" class="img-fluid rounded mb-3" alt="With MIS">
                                <p class="text-center">With MIS and 2D CDF sampling</p>
                            </div>
                        </div>

                        <!-- Light Tracer -->
                        <h4>Light Tracer</h4>
                        <a href="../assets/images/portfolio/LTstairs.jpg" data-fancybox="gallery">
                            <img src="../assets/images/portfolio/LTstairs.jpg" class="img-fluid rounded mb-3" alt="Scene rendered with Light Tracer">
                        </a>

                        <h3 class="mh-section-title">How to Run</h3>
                        <ol>
                            <li>Clone from GitHub: <code>https://github.com/xpt07/RTBase.git</code></li>
                            <li>Open Visual Studio and build in <strong>Release</strong> mode</li>
                            <li>Run with args like: <code>-scene materials -spp 8192</code></li>
                            <li>Use <kbd>WASD + EQ</kbd> to move camera, <kbd>P</kbd> to save images</li>
                        </ol>

                        <p>
                            <a class="btn btn-fill" href="https://github.com/xpt07/RTBase.git" target="_blank"><i class="fa fa-github"></i> View Code on GitHub</a>
                        </p>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="col-md-4">
                    <div class="mh-about-inner">
                        <h3 class="mh-section-title">Project Info</h3>
                        <ul class="mh-experience-deatils">
                            <li><i class="fa fa-user"></i> Individual project</li>
                            <li><i class="fa fa-calendar"></i> 2025</li>
                            <li><i class="fa fa-code"></i> C++, DirectX, OIDN</li>
                            <li><i class="fa fa-cogs"></i> BVH, MIS, PBR</li>
                        </ul>

                        <h3 class="mh-section-title">Screenshots</h3>
                        <a href="../assets/images/portfolio/cornell-box-PT.png" data-fancybox="gallery">
                            <img src="../assets/images/portfolio/cornell-box-PT.png" class="img-fluid rounded mb-3">
                        </a>
                        <a href="../assets/images/portfolio/afterTD-clipped.png" data-fancybox="gallery">
                            <img src="../assets/images/portfolio/afterTD-clipped.png" class="img-fluid rounded mb-3">
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>


    <script src="../assets/plugins/js/jquery.min.js"></script>
    <script src="../assets/plugins/js/popper.min.js"></script>
    <script src="../assets/plugins/js/bootstrap.min.js"></script>
    <script src="../assets/plugins/js/waypoints.min.js"></script>
    <script src="../assets/plugins/js/owl.carousel.min.js"></script>
    <script src="../assets/plugins/js/jquery.filterizr.min.js"></script>
    <script src="../assets/plugins/js/jquery.fancybox.min.js"></script>
    <script src="../assets/plugins/js/wow.min.js"></script>
    <script src="../assets/js/custom-scripts.js"></script>
    <script>new WOW().init();</script>

</body>
</html>
