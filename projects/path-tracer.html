<!doctype html>
<html lang="en">
<head>
    <title>Path Tracer — GuiCodes</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="CPU path tracer with BVH acceleration, multiple-importance sampling, HDR environment lighting, and OIDN denoising. Tile-based multithreading and layered BSDF architecture.">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="shortcut icon" href="../assets/images/favicon.png">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link rel="stylesheet" href="../assets/icons/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../assets/plugins/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/plugins/css/animate.css">
    <link rel="stylesheet" href="../assets/plugins/css/owl.css">
    <link rel="stylesheet" href="../assets/plugins/css/jquery.fancybox.min.css">
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link rel="stylesheet" href="../assets/css/responsive.css">
    <link rel="stylesheet" href="../assets/css/colors/purple.css" title="purple">

    <style>
        .project-hero {
            padding: 110px 0 60px;
            background: url('../assets/images/portfolio/cornell-box-PT') center/cover no-repeat;
            position: relative;
        }

            .project-hero::before {
                content: "";
                position: absolute;
                inset: 0;
                background: rgba(0,0,0,.55);
                pointer-events: none;
            }

            .project-hero .container {
                position: relative;
                z-index: 1;
            }

        .mh-header {
            position: relative;
            z-index: 10;
        }

            .mh-header .overlay {
                pointer-events: none;
            }

        .badge-tech {
            display: inline-block;
            padding: .35rem .6rem;
            border: 1px solid rgba(255,255,255,.2);
            border-radius: 999px;
            margin: 0 .35rem .35rem 0;
            font-size: .8rem;
        }

        pre.code, code.inline {
            font-family: Menlo,Consolas,monospace;
        }

        pre.code {
            background: #111;
            color: #ddd;
            padding: 16px;
            border-radius: 6px;
            overflow: auto;
        }

        /* Before/After slider */
        .ba-wrap {
            position: relative;
            max-width: 100%;
            overflow: hidden;
            border-radius: 6px;
        }

            .ba-wrap img {
                display: block;
                width: 100%;
                height: auto;
                user-select: none;
                pointer-events: none;
            }

        .ba-top {
            position: absolute;
            inset: 0;
            width: 50%;
            overflow: hidden;
            border-right: 2px solid rgba(255,255,255,.7);
        }

        .ba-handle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%,-50%);
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(0,0,0,.55);
            border: 2px solid #fff;
            display: flex;
            align-items: center;
            justify-content: center;
        }

            .ba-handle i {
                font-size: 14px;
                color: #fff;
            }

        .ba-range {
            width: 100%;
            margin-top: .75rem;
        }

        /* Table */
        table.bench {
            width: 100%;
            border-collapse: collapse;
        }

            table.bench th, table.bench td {
                border: 1px solid rgba(255,255,255,.15);
                padding: .5rem .6rem;
            }

            table.bench th {
                background: rgba(255,255,255,.05);
            }

        .mh-experience-deatils li {
            list-style: disc;
            margin-left: 1rem;
        }
    </style>
</head>
<body class="dark-vertion black-bg">

    <!-- Header / Nav -->
    <header class="black-bg mh-header mh-fixed-nav nav-scroll mh-xs-mobile-nav">
        <div class="overlay" style="pointer-events:none;"></div>
        <div class="container">
            <nav class="navbar navbar-expand-lg mh-nav nav-btn">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar"
                        aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbar">
                    <ul class="navbar-nav mr-auto ml-auto">
                        <li class="nav-item"><a class="nav-link" href="../index.html#mh-home">Home</a></li>
                        <li class="nav-item"><a class="nav-link" href="../index.html#mh-portfolio">Portfolio</a></li>
                        <li class="nav-item"><a class="nav-link" href="../index.html#mh-contact">Contact</a></li>
                    </ul>
                    <a class="btn btn-fill" href="../index.html#mh-portfolio"><i class="fa fa-arrow-left"></i> Back to Portfolio</a>
                </div>
            </nav>
        </div>
    </header>

    <!-- Hero -->
    <section class="project-hero mh-home" id="mh-home">
        <div class="container">
            <div class="row section-separator vertical-middle-content home-padding">
                <div class="col-sm-8">
                    <div class="mh-header-info">
                        <div class="mh-promo wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.1s">
                            <span>Project</span>
                        </div>
                        <h2 class="wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.2s">Physically-Based Path Tracer</h2>
                        <h4 class="wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.3s">
                            C++ renderer with BVH, MIS, HDR environment lighting, and OIDN denoising
                        </h4>
                        <div class="mh-meta wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.4s">
                            <span class="badge-tech">C++17</span>
                            <span class="badge-tech">Graphics</span>
                            <span class="badge-tech">Path Tracing</span>
                            <span class="badge-tech">BVH</span>
                            <span class="badge-tech">MIS</span>
                            <span class="badge-tech">OIDN</span>
                            <span class="badge-tech">Direct3D 11 (display)</span>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4 text-center wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.4s">
                    <img src="../assets/images/portfolio/pt-hero.jpg" alt="Path tracer render of a Cornell box/materials scene" class="img-fluid rounded">
                </div>
            </div>
        </div>
    </section>

    <!-- Content -->
    <main class="mh-about" id="content">
        <div class="container">
            <div class="row section-separator">
                <!-- Main column -->
                <div class="col-sm-12 col-md-8">
                    <div class="mh-about-inner">

                        <!-- Overview -->
                        <h3 class="mh-section-title wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.1s">Overview</h3>
                        <p class="wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.2s">
                            I implemented a CPU path tracer in modern C++ with a modular BSDF architecture, BVH acceleration, and multiple-importance sampling (MIS) for both triangle area lights and HDR environment maps. Frames are displayed via a minimal Direct3D 11 canvas. The renderer integrates Intel Open Image Denoise (OIDN) using albedo and normal guides and employs tile-based multithreading to scale across cores.
                        </p>

                        <!-- Key Features -->
                        <h3 class="mh-section-title wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.25s">Key Features</h3>
                        <ul class="wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.3s">
                            <li><strong>Geometry & Acceleration:</strong> Triangle meshes with Möller–Trumbore intersections; BVH with AABB slab tests.</li>
                            <li><strong>BSDF System:</strong> Diffuse, mirror, and conductor scaffolding with optional thin-film coating; Fresnel dielectric; GGX helpers scaffolded.</li>
                            <li><strong>Lighting:</strong> Triangle area lights (uniform area sampling) and lat-long HDR environment lighting via a tabulated 2D luminance distribution (marginal/conditional CDFs weighted by <em>sin&nbsp;θ</em>).</li>
                            <li><strong>Variance Reduction:</strong> MIS (balance heuristic) for direct lighting; Russian roulette for path termination.</li>
                            <li><strong>Imaging:</strong> HDR film, bilinear texture sampling (LDR/HDR), and OIDN denoising with guide buffers.</li>
                            <li><strong>Parallelism:</strong> Tile-based job queue with per-tile RNG state for high CPU utilisation.</li>
                        </ul>

                        <!-- Technical Details -->
                        <h3 class="mh-section-title wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.35s">Technical Details</h3>
                        <ul class="wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.4s">
                            <li><strong>Sampling:</strong> Cosine-weighted hemisphere sampling, uniform triangle sampling, and an environment-map importance sampler built from a luminance × <em>sin&nbsp;θ</em> table.</li>
                            <li><strong>Direct Illumination:</strong> One-light sampling per bounce with MIS against the BSDF sample; visibility via shadow rays.</li>
                            <li><strong>Path Integration:</strong> Throughput updates in the local shading frame; emissive hits and background handled with consistent PDFs for MIS.</li>
                            <li><strong>Denoising:</strong> OIDN filter using color, albedo, and normal buffers; outputs HDR for subsequent tonemapping.</li>
                            <li><strong>Display:</strong> CPU writes to a GPU texture presented through a lightweight D3D11 pipeline.</li>
                        </ul>

                        <!-- Before/After Denoise -->
                        <h3 class="mh-section-title wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.45s">Denoising (Before/After)</h3>
                        <div class="ba-wrap wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.5s" id="ba1">
                            <img src="../assets/images/portfolio/pt-no-denoise.jpg" alt="No denoise">
                            <div class="ba-top"><img src="../assets/images/portfolio/pt-denoised.jpg" alt="Denoised"></div>
                            <div class="ba-handle"><i class="fa fa-arrows-h"></i></div>
                        </div>
                        <input type="range" min="0" max="100" value="50" class="ba-range wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.55s" data-target="#ba1">

                        <!-- Performance Results (example figures; replace with your latest runs) -->
                        <h3 class="mh-section-title wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.6s">Performance Results</h3>
                        <p class="wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.65s">
                            Rendering is parallelised by 16×16 tiles with an atomic work queue. In my Materials scene, an albedo pass demonstrated a large speed-up from parallel tiling compared to a sequential baseline. Populate the table with runs from your current machine for reproducibility.
                        </p>
                        <table class="bench wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.7s">
                            <thead><tr><th>Scene</th><th>SPP</th><th>Tiled MT?</th><th>Time (s)</th><th>Notes</th></tr></thead>
                            <tbody>
                                <tr><td>Materials</td><td>1024</td><td>Yes</td><td>5.0</td><td>~12× faster vs single-thread albedo baseline</td></tr>
                                <tr><td>Cornell Box</td><td>2048</td><td>Yes</td><td>—</td><td>Low variance with MIS + env importance</td></tr>
                            </tbody>
                        </table>

                        <!-- SPP progression (thumbnails) -->
                        <div class="text-center wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.75s">
                            <img src="../assets/images/portfolio/pt-spp-001.jpg" alt="SPP 1" class="img-fluid rounded mb-3" style="max-width: 24%; margin:.25rem;">
                            <img src="../assets/images/portfolio/pt-spp-008.jpg" alt="SPP 8" class="img-fluid rounded mb-3" style="max-width: 24%; margin:.25rem;">
                            <img src="../assets/images/portfolio/pt-spp-064.jpg" alt="SPP 64" class="img-fluid rounded mb-3" style="max-width: 24%; margin:.25rem;">
                            <img src="../assets/images/portfolio/pt-spp-1024.jpg" alt="SPP 1024" class="img-fluid rounded mb-3" style="max-width: 24%; margin:.25rem;">
                        </div>

                        <!-- Pipeline Diagram -->
                        <h3 class="mh-section-title wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.8s">Rendering Pipeline</h3>
                        <p class="wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.85s">
                            Rays → BVH traversal → Shading (BSDF sampling &amp; evaluation) + direct light sampling → MIS weighting → Film (HDR) → OIDN denoise → Display.
                        </p>
                        <img src="../assets/images/portfolio/pt-pipeline.svg" alt="Path tracer pipeline diagram" class="img-fluid rounded wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.9s">

                        <!-- Code Highlights -->
                        <h3 class="mh-section-title wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.95s">Code Highlights</h3>
                        <h4 class="wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="1.0s">MIS Weight (Balance Heuristic)</h4>
                        <pre class="code wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="1.05s">
// weight for combining light-sampled and BSDF-sampled estimates
inline float misBalance(float pdfA, float pdfB) {
    return (pdfA) / (pdfA + pdfB + 1e-8f);
}
                        </pre>
                        <h4 class="wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="1.1s">Uniform Triangle Area Sampling</h4>
                        <pre class="code wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="1.15s">
// sample a triangle with pdf = 1 / area
Vec3 sampleTriangle(const Vec3& a, const Vec3& b, const Vec3& c, float u1, float u2) {
    float su = std::sqrt(u1);
    float b1 = 1.0f - su;
    float b2 = u2 * su;
    float b3 = 1.0f - b1 - b2;
    return b1*a + b2*b + b3*c;
}
                        </pre>

                        <!-- Challenges & Lessons -->
                        <h3 class="mh-section-title wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.2s">Challenges &amp; Lessons Learned</h3>
                        <ul class="wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.25s">
                            <li>Designing a clean BSDF interface simplified adding new materials and separating sampling/evaluation/PDF logic.</li>
                            <li>Environment-map importance sampling (luminance × <em>sin&nbsp;θ</em> table) substantially reduced variance compared to uniform directional sampling.</li>
                            <li>Adaptive tile sampling did not outperform uniform sampling due to unstable variance estimates and overhead—profiling guided that decision.</li>
                        </ul>

                        <!-- Demo & Instructions -->
                        <h3 class="mh-section-title wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.3s">Demo &amp; Instructions</h3>
                        <ol class="wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.35s">
                            <li>Windows / MSVC (C++17). Dependencies: stb_image / stb_image_write, Intel OIDN.</li>
                            <li>Run example: <code class="inline">PathTracer.exe -scene cornell-box -SPP 8192 -output GI.hdr</code></li>
                            <li>Controls: W/A/S/D/E/Q, mouse look; <code class="inline">P</code> saves HDR; <code class="inline">L</code> saves tonemapped PNG.</li>
                        </ol>
                        <div class="wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.5s">
                            <a class="btn btn-fill" href="../assets/docs/Advanced_Computer_Graphics_Report.pdf" target="_blank" rel="noopener">
                                <i class="fa fa-file-pdf-o"></i> Read the Report (PDF)
                            </a>
                            <a class="btn btn-fill" href="../index.html#mh-portfolio"><i class="fa fa-arrow-left"></i> Back to Portfolio</a>
                        </div>
                    </div>
                </div>

                <!-- Sidebar / Project Info -->
                <div class="col-sm-12 col-md-4">
                    <div class="mh-about-inner">
                        <h3 class="mh-section-title wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.1s">Project Info</h3>
                        <ul class="mh-experience-deatils wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.2s">
                            <li><i class="fa fa-user"></i> Individual project</li>
                            <li><i class="fa fa-calendar"></i> 2025</li>
                            <li><i class="fa fa-code"></i> C++17, D3D11 (display), stb_image, Intel OIDN</li>
                            <li><i class="fa fa-cogs"></i> BVH, MIS, HDR Env Sampling, Tile-based Multithreading</li>
                        </ul>

                        <h3 class="mh-section-title wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.3s">Screenshots</h3>
                        <div class="wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.35s">
                            <!-- Replace with your actual renders -->
                            <a href="../assets/images/portfolio/pt-cornell-1.jpg" data-fancybox="gallery">
                                <img src="../assets/images/portfolio/pt-cornell-1.jpg" alt="Cornell box render" class="img-fluid rounded mb-3">
                            </a>
                            <a href="../assets/images/portfolio/pt-materials-1.jpg" data-fancybox="gallery">
                                <img src="../assets/images/portfolio/pt-materials-1.jpg" alt="Materials scene render" class="img-fluid rounded mb-3">
                            </a>
                            <a href="../assets/images/portfolio/pt-env-1.jpg" data-fancybox="gallery">
                                <img src="../assets/images/portfolio/pt-env-1.jpg" alt="Environment lighting render" class="img-fluid rounded mb-3">
                            </a>
                            <a href="../assets/images/portfolio/pt-spp-1024.jpg" data-fancybox="gallery">
                                <img src="../assets/images/portfolio/pt-spp-1024.jpg" alt="High SPP render" class="img-fluid rounded mb-3">
                            </a>
                            <!-- Optional: short timelapse -->
                            <a href="../assets/videos/pt-progress.mp4" data-fancybox="gallery">
                                <img src="../assets/images/portfolio/pt-video-thumb.jpg" alt="Progressive render timelapse" class="img-fluid rounded mb-3">
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="mh-footer" id="mh-contact">
        <div class="map-image image-bg">
            <div class="container">
                <div class="row section-separator">
                    <div class="col-sm-12 section-title wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.2s">
                        <h3>Contact Me</h3>
                    </div>
                    <div class="col-sm-12 mh-footer-address">
                        <div class="row">
                            <div class="col-sm-12 col-md-4">
                                <div class="mh-address-footer-item dark-bg shadow-1 wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.3s">
                                    <div class="each-icon"><i class="fa fa-location-arrow"></i></div>
                                    <div class="each-info">
                                        <h4>Address</h4>
                                        <address>49 Queens Road, Coventry,<br>England</address>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-4">
                                <div class="mh-address-footer-item dark-bg shadow-1 wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.5s">
                                    <div class="each-icon"><i class="fa fa-envelope-o"></i></div>
                                    <div class="each-info">
                                        <h4>Email</h4>
                                        <a href="mailto:guilhermenoronha543@icloud.com">guilhermenoronha543@icloud.com</a><br>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-4">
                                <div class="mh-address-footer-item dark-bg shadow-1 wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.7s">
                                    <div class="each-icon"><i class="fa fa-phone"></i></div>
                                    <div class="each-info">
                                        <h4>Phone</h4>
                                        <a href="callto:+44 7751134587">+44&nbsp;7751134587</a><br>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Contact form + map (unchanged from template) -->
                    <div class="col-sm-12 col-md-6 wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.3s">
                        <form id="contactForm" class="single-form quate-form" data-toggle="validator">
                            <div id="msgSubmit" class="h3 text-center hidden"></div>
                            <div class="row">
                                <div class="col-md-6 col-sm-12">
                                    <input name="name" class="contact-name form-control" id="name" type="text" placeholder="First Name" required>
                                </div>
                                <div class="col-md-6 col-sm-12">
                                    <input name="L_name" class="contact-email form-control" id="L_name" type="text" placeholder="Last Name" required>
                                </div>
                                <div class="col-sm-12">
                                    <input name="email" class="contact-subject form-control" id="email" type="email" placeholder="Your Email" required>
                                </div>
                                <div class="col-sm-12">
                                    <textarea class="contact-message" id="message" rows="6" placeholder="Your Message" required></textarea>
                                </div>
                                <div class="btn-form col-sm-12">
                                    <button type="submit" class="btn btn-fill btn-block" id="form-submit">Send Message</button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="col-sm-12 col-md-6 wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.5s">
                        <div class="mh-map"><div id="mh-map" class="shadow-1"></div></div>
                    </div>
                    <div class="col-sm-12 mh-copyright wow fadeInUp" data-wow-duration="0.8s" data-wow-delay="0.3s">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="text-left text-xs-center">
                                    <p><a href="templateshub.net">Templates Hub</a></p>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <ul class="social-icon">
                                    <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                                    <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                                    <li><a href="#"><i class="fa fa-github"></i></a></li>
                                    <li><a href="#"><i class="fa fa-dribbble"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </footer>

    <!-- JS -->
    <script src="../assets/plugins/js/jquery.min.js"></script>
    <script src="../assets/plugins/js/popper.min.js"></script>
    <script src="../assets/plugins/js/bootstrap.min.js"></script>
    <script src="../assets/plugins/js/waypoints.min.js"></script>
    <script src="../assets/plugins/js/owl.carousel.min.js"></script>
    <script src="../assets/plugins/js/jquery.filterizr.min.js"></script>
    <script src="../assets/plugins/js/jquery.fancybox.min.js"></script>
    <script src="../assets/plugins/js/wow.min.js"></script>
    <script src="../assets/js/custom-scripts.js"></script>
    <script>new WOW().init();</script>

    <!-- Before/After slider logic -->
    <script>
        (function(){
            function initBA(wrapper){
                var $wrap = $(wrapper);
                var $top = $wrap.find('.ba-top');
                var $handle = $wrap.find('.ba-handle');
                function setSplit(pct){
                    pct = Math.max(0, Math.min(100, pct));
                    $top.css('width', pct + '%');
                    $handle.css({ left: pct + '%' });
                }
                // mouse / touch drag
                $wrap.on('mousemove touchmove', function(e){
                    if(e.buttons !== 1 && e.type !== 'touchmove') return;
                    var pageX = e.pageX || (e.originalEvent.touches && e.originalEvent.touches[0].pageX);
                    if(!pageX) return;
                    var off = $wrap.offset().left, w = $wrap.width();
                    setSplit(((pageX - off) / w) * 100);
                });
                // range input support
                $('input.ba-range[data-target="#'+$wrap.attr('id')+'"]').on('input change', function(){
                    setSplit(this.value);
                });
            }
            $('#ba1').each(function(){ initBA(this); });
        })();
    </script>
</body>
</html>
